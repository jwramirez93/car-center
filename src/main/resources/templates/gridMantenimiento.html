<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	
	<head th:replace="layout/layout :: head"></head>
	
	<body>
	
		<header th:replace="layout/layout :: header"></header>
	
		<div class="py-4">
		
			<div class="card bg-light">
					
				<div class="card-header" th:text="${title_gridMantenimiento}">
				</div>
				
				<div class="card-body">
		
					<table class="table table-bordered">
					
						<thead class="table-light">
							<tr>
								<th>Placa Vehiculo</th>
								<th>Mecanico Asignado</th>
								<th>Tope Presupuesto Cliente</th>
								<th colspan="2">Servicios</th>
								<th colspan="2">Repuestos</th>
								<th colspan="3">Facturar</th>
							</tr>
						</thead>
						
						<tbody>
							<tr th:each="mant : ${listaMantenimientos}">
								<td th:text="${mant.getVehiculo().getPlaca()}"></td>
								
								<td th:if="${mant.getMecanico() == null}">
									<button type="button" class="btn btn-info" 
										data-toggle="modal" data-target="#staticBackdrop">Asignar Mecanico</button>
								</td>
								<td th:if="${mant.getMecanico()}" th:text="${mant.getMecanico().getNombreCompl()}"></td>
								
								<td th:if="${mant.getPrecio_tope() <= 0}">No se define tope</td>
								<td th:if="${mant.getPrecio_tope() > 0}" 
									th:text="'$'+${#numbers.formatDecimal(mant.getPrecio_tope(), 1, 'DEFAULT', 2, 'DEFAULT')}"></td>
								<td th:text="'$'+${#numbers.formatDecimal(mant.getPrecioTotalServicios(), 1, 'DEFAULT', 2, 'DEFAULT')}"></td>
								<td><button class="btn btn-secondary">Asignar Servicios</button></td>
								<td></td>
								<td><button class="btn btn-secondary">Asignar Repuestos</button></td>
								<td><button class="btn btn-secondary">Realizar Facturacion</button></td>
							</tr>
						</tbody>
					
					</table>
				</div>		
			
			</div>
		
		</div>
		
		<div class="modal fade bd-example-modal-lg"  id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" 
			role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
		  <div class="modal-dialog modal-lg">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Asigne un mecanico</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body">
		      	
		      	<table class="table">
		      		<thead>
		      			<tr>
		      				<th>Nombre Completo</th>
		      				<th>Tiempo </th>
		      				<th>Asignar </th>
		      			</tr>
		      		</thead>
		      		<tbody>
		      			<tr th:each="mec : ${listaMecanicos}">
		      				<td th:text="${mec.getNombre_completo()}"></td>
		      				<td th:text="${mec.getTiempo_asignacion()}"></td>
		      				<td><input name="radioMec" type="radio" th:value="${mec.getTipo_documento()}+'-'+${mec.getDocumento()}" /></td>
		      			</tr>
		      		</tbody>
		      	</table>
		      	
		      </div>
		      <div class="modal-footer">
		      	<button class="btn" disabled>Aceptar</button>
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
		      </div>
		    </div>
		  </div>
		</div>
		
		<footer th:replace="layout/layout :: footer"></footer>
		
	</body>

</html>